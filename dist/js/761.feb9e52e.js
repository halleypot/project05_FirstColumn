"use strict";(self["webpackChunkheimatoutiao"]=self["webpackChunkheimatoutiao"]||[]).push([[761],{3761:function(t,s,e){e.r(s),e.d(s,{default:function(){return u}});var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"reply"},[s("van-cell",{scopedSlots:t._u([{key:"title",fn:function(){return[s("div",{staticClass:"artComment"},[s("van-image",{attrs:{width:"30",height:"30",round:"",fit:"cover",src:t.currentCom.aut_photo}}),s("div",{staticClass:"currentComment"},[s("span",{staticClass:"currentName"},[t._v(t._s(t.currentCom.aut_name))]),s("span",[t._v(t._s(t.currentCom.content))]),s("span",[t._v(t._s(t._f("timeFormat")(t.currentCom.pubdate)))])])],1)]},proxy:!0}])}),s("van-divider",[t._v(" 全部回复 ")]),s("van-list",{attrs:{finished:t.finished,"finished-text":"- THE END -"},on:{load:t.onLoad},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},t._l(t.replyList,(function(e,a){return s("van-cell",{key:a,scopedSlots:t._u([{key:"title",fn:function(){return[s("div",{staticClass:"head"},[s("van-image",{attrs:{width:"40",height:"40",round:"",fit:"cover",src:e.aut_photo}}),s("div",{staticClass:"reader"},[s("span",{style:{color:"red"}},[t._v(t._s(e.aut_name))]),s("span",[t._v(t._s(e.content))]),s("span",[t._v(t._s(t._f("timeFormat")(e.pubdate)))])])],1)]},proxy:!0}],null,!0)})})),1),s("van-field",{staticClass:"inpReply",attrs:{center:"",clearable:"",placeholder:"请输入评论"},scopedSlots:t._u([{key:"button",fn:function(){return[s("van-button",{attrs:{size:"small",type:"primary"},on:{click:t.toReply}},[t._v("回复")])]},proxy:!0}]),model:{value:t.sms,callback:function(s){t.sms=s},expression:"sms"}})],1)},n=[],i=e(3571),o={props:["currentCom"],data(){return{loading:!1,finished:!1,replyList:[],offset:"",end:"",sms:""}},methods:{async toReply(){const t=await(0,i.pw)({target:this.currentCom.com_id,content:this.sms,art_id:this.$route.query.art_id});this.replyList.unshift(t.data.data.new_obj),this.sms="",this.currentCom.reply_count+=1},async onLoad(){const t=await(0,i.mI)({type:"c",source:this.currentCom.com_id});console.log(t),this.replyList.unshift(...t.data.data.results),this.offset=t.data.data.last_id,this.end=t.data.data.end_id,this.loading=!1,this.offset===this.end&&(this.finished=!0)}}},r=o,l=e(1001),c=(0,l.Z)(r,a,n,!1,null,null,null),u=c.exports}}]);