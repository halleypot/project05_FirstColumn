"use strict";(self["webpackChunkheimatoutiao"]=self["webpackChunkheimatoutiao"]||[]).push([[69],{6069:function(t,e,s){s.r(e),s.d(e,{default:function(){return c}});var i=function(){var t=this,e=t._self._c;return e("div",{ref:"newsBox",staticClass:"newsList"},[e("van-pull-refresh",{attrs:{"success-text":"刷新成功","pulling-text":""},on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(s,i){return e("van-cell",{key:i,attrs:{title:s.title},on:{click:function(e){return t.$router.push({path:"/home/detail",query:{article_id:s.art_id}})}},scopedSlots:t._u([{key:"label",fn:function(){return[s.cover.type>0?e("van-grid",{attrs:{border:!1,"column-num":3}},t._l(s.cover.images,(function(t,s){return e("van-grid-item",{key:s},[e("van-image",{attrs:{src:t,width:"90",height:"90",fit:"cover"}})],1)})),1):t._e(),e("div",{staticClass:"detail"},[e("span",[t._v(t._s(s.aut_name))]),e("span",[t._v(t._s(s.comm_count)+"评论")]),e("span",{staticClass:"myTime"},[t._v(t._s(t._f("timeFormat")(s.pubdate)))]),e("van-icon",{attrs:{name:"cross",size:"10"}})],1)]},proxy:!0}],null,!0)})})),1)],1)],1)},n=[],a=s(3571),r={props:["channel_id"],data(){return{loading:!1,finished:!1,list:[],timestamp:Date.now(),refreshing:!1,scrollTop:""}},methods:{async onLoad(){this.refreshing&&(this.list=[],this.timestamp=Date.now(),setTimeout((()=>{this.refreshing=!1}),2e3));const t=await(0,a.VW)({channel_id:this.channel_id,timestamp:this.timestamp});this.list.push(...t.data.data.results),this.timestamp=t.data.data.pre_timestamp,this.loading=!1,null===this.timestamp&&(this.finished=ture)},onRefresh(){this.finished=!1,this.loading=!0,this.onLoad()}},activated(){this.$refs.newsBox.scrollTop=this.scrollTop},mounted(){this.$refs.newsBox.onscroll=()=>{this.scrollTop=this.$refs.newsBox.scrollTop}}},o=r,l=s(1001),h=(0,l.Z)(o,i,n,!1,null,null,null),c=h.exports}}]);